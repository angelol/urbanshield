<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
 <title>Using Tunnelblick</title>
</head>
<body>
<p><img src="using-tunnelblick-files/tb-logo.png" /> </p><h2>Using Tunnelblick</h2><p>Tunnelblick is an OS X Graphical User Interface (GUI) for the OpenVPN free and open-source program, which maintains VPN &quot;tunnels&quot;. It provides easy-to-use control of OpenVPN server and/or client connections. It is written in Cocoa and runs on OS X Tiger (10.4), Leopard (10.5), and Snow Leopard (10.6). It comes as a ready to use Universal  application with all necessary binaries and drivers, including OpenVPN and tun/tap. Tunnelblick is free software licensed under the GNU General Public License (GPL) Version 2. </p><p>For more information, including wikis and a discussion group, see the <span style="border-bottom: 1px dotted black">Tunnelblick home page</span>. </p><p>This document describes how to use Tunnelblick version 3.0b24. </p><p>The latest versions of this document and related documents including release notes, FAQ, and instructions for building Tunnelblick from the source code may be found in the <span style="border-bottom: 1px dotted black">Tunnelblick Wiki</span>. </p><p><strong>PLEASE DO</strong> discuss any problems on the <span style="border-bottom: 1px dotted black">Tunnelblick Discussion List</span>. </p><p><strong>PLEASE DO NOT</strong> post comments at the bottom of this page. </p><p>This document contains the following sections: </p><p><ul><ul><li><a href="#INSTALLING_TUNNELBLICK">INSTALLING TUNNELBLICK</a></li><li><a href="#UNINSTALLING_TUNNELBLICK">UNINSTALLING TUNNELBLICK</a></li><li><a href="#CONFIGURATION_FILES">CONFIGURATION FILES</a></li><li><a href="#FILE_LOCATIONS">FILE LOCATIONS</a></li><li><a href="#THE_FIRST_TIME_TUNNELBLICK_IS_RUN_BY_EACH_USER">THE FIRST TIME TUNNELBLICK IS RUN BY EACH USER</a></li><li><a href="#THE_FIRST_TIME_TUNNELBLICK_IS_RUN_ON_A_COMPUTER">THE FIRST TIME TUNNELBLICK IS RUN ON A COMPUTER</a></li><li><a href="#THE_SECOND_TIME_TUNNELBLICK_IS_RUN_BY_EACH_USER">THE SECOND TIME TUNNELBLICK IS RUN BY EACH USER</a></li><li><a href="#WHEN_A_CONFIGURATION_FILE_CHANGES">WHEN A CONFIGURATION FILE CHANGES</a></li><li><a href="#NORMAL_TUNNELBLICK_OPERATION">NORMAL TUNNELBLICK OPERATION</a></li><li><a href="#THE_&quot;OPTIONS&quot;_SUBMENU">THE "OPTIONS" SUBMENU</a></li><li><a href="#THE_&quot;OPENVPN_LOG”_WINDOW">THE "OPENVPN LOG” WINDOW</a></li><li><a href="#THE_&quot;ABOUT_TUNNELBLICK”_WINDOW">THE "ABOUT TUNNELBLICK” WINDOW</a></li><li><a href="#THE_&quot;SET_NAMESERVER&quot;_CHECKBOX_AND_DNS_&amp;_WINS_SETTI">THE "SET NAMESERVER" CHECKBOX AND DNS & WINS SETTINGS</a></li><li><a href="#THE_&quot;MONITOR_CONNECTION&quot;_CHECKBOX">THE "MONITOR CONNECTION" CHECKBOX</a></li><li><a href="#USING_MORE_THAN_ONE_VPN_CONNECTION">USING MORE THAN ONE VPN CONNECTION</a></li><li><a href="#USING_MORE_THAN_ONE_VPN_CONNECTION_SIMULTANEOUSLY">USING MORE THAN ONE VPN CONNECTION SIMULTANEOUSLY</a></li><li><a href="#AUTOMATICALLY_STARTING_TUNNELBLICK_UPON_LOGIN">AUTOMATICALLY STARTING TUNNELBLICK UPON LOGIN</a></li><li><a href="#AUTOMATICALLY_OPENING_A_VPN_CONNECTION_WHEN_TUNNELBLICK_STARTS">AUTOMATICALLY OPENING A VPN CONNECTION WHEN TUNNELBLICK STARTS</a></li><li><a href="#USING_openvpn-down-root.so">USING openvpn-down-root.so</a></li><li><a href="#PREFERENCES">PREFERENCES</a></li><li><a href="#COMMAND-LINE_INTERFACE">COMMAND-LINE INTERFACE</a></li><li><a href="#DOCUMENT_HISTORY">DOCUMENT HISTORY</a></li></ul></ul> </p><h2><a name="INSTALLING_TUNNELBLICK"/>INSTALLING TUNNELBLICK</h2><p>To install Tunnelblick, first download it from the Downloads page, then double-click the downloaded .dmg file. An icon for a &quot;Tunnelblick” disk will appear on the Desktop, and a new window similar to the following will appear: </p><p><img src="using-tunnelblick-files/using-tunnelblick-dmg.png" /> </p><p>Drag Tunnelblick.app (which may be labeled &quot;Tunnelblick” without the &quot;.app”) and drop it on the shortcut to the Applications folder. This will copy the application from the .dmg into the Applications folder. You may then close the window and eject the &quot;Tunnelblick” disk icon. </p><p>There is no need to install OpenVPN separately - the Tunnelblick application contains both the Tunnelblick GUI and OpenVPN. See the Tunnelblick release notes (or click &quot;About…&quot; in Tunnelblick) to determine the version of OpenVPN included with the version of Tunnelblick that you are using. </p><p>If you wish Tunnelblick to appear in the Dock, navigate to Applications, and drag and drop Tunnelblick to the Dock. </p><h2><a name="UNINSTALLING_TUNNELBLICK"/>UNINSTALLING TUNNELBLICK</h2><p>To uninstall Tunnelblick, move Tunnelblick.app from the Applications folder to the Trash. Other than the preferences and configuration files described in &quot;File Locations&quot;, there are no other files installed -- OpenVPN, the tun/tap kernel extensions, and up/down scripts are contained within the Tunnelblick.app package and are loaded only when needed directly from there. Tunnelblick may store passphrases or passwords in the Keychain at the user&#x27;s request. </p><h2><a name="CONFIGURATION_FILES"/>CONFIGURATION FILES</h2><p>Each tunnel to be opened by Tunnelblick needs an OpenVPN configuration file. Tunnelblick considers any file located in ~/Library/Application Support/Tunnelblick/Configurations with an extension of .conf or .ovpn to be a configuration file, and presents each such file as a potential &quot;connection”. (The &quot;~&quot; refers to your home folder.) Often these configuration files will be supplied to you. Refer to <span style="border-bottom: 1px dotted black">the OpenVPN documentation</span> for details about what the configuration file should contain. (Note that some OpenVPN options are available only on Windows.) </p><p>When using a &quot;deployed&quot; version of Tunnelblick, configuration files are all located within the Tunnelblick application itself, so ~/Library/Application Support/Tunnelblick/Configurations is not used for configuration files (although it may be used for keys, certificates, and/or shell scripts). See the <span style="border-bottom: 1px dotted black">Deploying Tunnelblick</span> wiki for details. </p><p>Tunnelblick monitors the folder that contains the configuration files. If a configuration file is added, the new configuration is available immediately without restarting Tunnelblick or disturbing existing connections. If a  configuration is removed from the folder, any connection using that configuration is immediately disconnected. To disable this behavior, use &quot;doNotMonitorConfigurationFolder&quot;. (See the &quot;Preferences&quot; section.) </p><p>The configuration file may also be &quot;shadow&quot; copied to the /Library/Application Support Tunnelblick/Users/<i>username</i> folder. This is done transparently for configuration files located on network volumes. The user should never manipulate this folder or its contents directly; Tunnelblick will do so automatically. (See &quot;useShadowConfigurationFiles&quot; in the &quot;Preferences&quot; section.) </p><p>If Tunnelblick&#x27;s &quot;Set nameserver” option is used: </p><ul><li>Any &quot;up” or &quot;down” options in the configuration file will be ignored. </li><li>If any &quot;user” or &quot;group” options appear in the configuration file, DNS settings will not be restored when a tunnel is disconnected. </li></ul><h2><a name="FILE_LOCATIONS"/>FILE LOCATIONS</h2><p>Tunnelblick preferences are contained in ~/Library/Preferences/com.openvpn.tunnelblick.plist. (The &quot;~” indicates your home folder.) Deployed versions of Tunnelblick may contain a &quot;forced-preferences.plist&quot; file within the Tunnelblick application itself; see the <span style="border-bottom: 1px dotted black">Deploying Tunnelblick</span> wiki for details. </p><p>OpenVPN configuration files are stored in ~/Library/Application Support/Tunnelblick/Configurations. Usually the key and certificate files are stored there, too. Since these files are all located in the user&#x27;s Library folder, they must be set up separately for each user. </p><p>Note 1: Prior to Tunnelblick version 3.0b24, configuration files were stored in ~/Library/openvpn. Version 3.0b24 and later versions automatically move that folder to its new location, and replace it with a symbolic link to the new location. </p><p>Note 2: <i>Deployed</i> versions of Tunnelblick contain the configuration file(s), so they do not need to be set up for each user -- any user that can access Tunnelblick.app can connect to VPN. </p><p>&quot;Shadow&quot; copies of configuration files (if they exist) are located in /Library/Application Support Tunnelblick/Users/<i>username</i>. (See &quot;useShadowConfigurationFiles&quot; in the &quot;Preferences&quot; section.) </p><p>See the <span style="border-bottom: 1px dotted black">Deploying Tunnelblick</span> wiki for details of file locations when using a deployed version of Tunnelblick. </p><p>Within the Tunnelblick.app application, client up/down scripts and openvpn-down-root.so are located in Tunnelblick.app/Contents/Resources (see the &quot;Set nameserver” checkbox in the &quot;OpenVPN Log Window” section). To access Tunnelblick.app/Contents in the Finder, control-click Tunnelblick.app in the Applications folder, then click on &quot;Show Package Contents”. </p><h2><a name="THE_FIRST_TIME_TUNNELBLICK_IS_RUN_BY_EACH_USER"/>THE FIRST TIME TUNNELBLICK IS RUN BY EACH USER</h2><p>When there are no configuration files in ~/Library/Application Support/Tunnelblick/Configurations (which is usually the case the first time Tunnelblick is run by each user when using a non-deployed version of Tunnelblick), the following screen will be displayed: </p><p><img src="using-tunnelblick-files/using-tunnelblick-welcome.png" /> </p><p>If you click &quot;Quit”, Tunnelblick will quit without doing anything. If you click &quot;Continue”, Tunnelblick will create and save an example OpenVPN configuration file, ~/Library/Application Support/Tunnelblick/Configurations/openvpn.conf, and then open it in <span style="border-bottom: 1px dotted black">TextEdit</span> for you to modify. If you have an OpenVPN configuration file that you are supposed to use, copy its contents, paste them into this file (replacing the default contents), save, and exit <span style="border-bottom: 1px dotted black">TextEdit</span>. Your configuration (named &quot;openvpn.conf”) is all set. Tunnelblick changes the ownership of OpenVPN configuration files to root, so it is protected against unnoticed and possibly malicious changes. </p><p>If you have received key files or certificate files together with your personal configuration file, please make sure to put them in ~/Library/Application Support/Tunnelblick/Configurations/ (or another location as specified by your network administrator). OpenVPN will try to locate the key files in this folder, unless absolute paths to them are specified in the configuration file. </p><h2><a name="THE_FIRST_TIME_TUNNELBLICK_IS_RUN_ON_A_COMPUTER"/>THE FIRST TIME TUNNELBLICK IS RUN ON A COMPUTER</h2><p>The first time Tunnelblick is run on a particular computer (but only the first time the first user runs it), it will display the following screen: </p><p><img src="using-tunnelblick-files/using-tunnelblick-password.png" /> </p><p>Please enter the name and password of a computer administrator. Tunnelblick&#x27;s imbedded OpenVPN needs root privileges because it needs to modify network settings by configuring new network devices, changing routes, and adding and removing nameservers. Because we don&#x27;t want you to enter your administrator account name and password every time you start a VPN connection, Tunnelblick comes with a setuid root binary that allows it to do exactly one thing: start a VPN connection with super user rights. Tunnelblick needs your administrator account name password only on its first start after installation, so it can create this setuid root binary. </p><h2><a name="THE_SECOND_TIME_TUNNELBLICK_IS_RUN_BY_EACH_USER"/>THE SECOND TIME TUNNELBLICK IS RUN BY EACH USER</h2><p>The second time Tunnelblick is run by each user, a screen similar to the following will be displayed: </p><p><img src="using-tunnelblick-files/using-tunnelblick-check.png" /> </p><p>Specify whether or not you wish to have Tunnelblick check for updates. Each time an update is available, you will be given a choice of whether to install the update or not. </p><h2><a name="WHEN_A_CONFIGURATION_FILE_CHANGES"/>WHEN A CONFIGURATION FILE CHANGES</h2><p>Whenever a configuration file changes, you will need to enter the name and password of a computer administrator. This is done as a security measure: because configuration files can contain references to scripts that run as root, they are owned by root and an administrator must grant permission to use them. </p><h2><a name="NORMAL_TUNNELBLICK_OPERATION"/>NORMAL TUNNELBLICK OPERATION</h2><p>Once Tunnelblick has been started, you control it from the icon in the Status Bar at the top of your screen. The Tunnelblick icon is usually placed between the time and the Spotlight icon. When no VPN connection is active, the icon is dark, indicating a closed tunnel: </p><p><img src="using-tunnelblick-files/using-tunnelblick-closed.png" /> </p><p>If you click on the icon, you&#x27;ll see a drop down menu similar to the following: </p><p><img src="using-tunnelblick-files/using-tunnelblick-menu-a.png" /> </p><p>There will be a &quot;Connect” menu item for each .ovpn or .conf file in ~/Library/Application Support/Tunnelblick/Configurations/. Click on one to establish the corresponding pre-configured VPN connection. To illustrate the connection being established, three dots will appear in the menu item, and the Tunnelblick icon will darken and lighten repeatedly. If the connection is successfully opened, the icon will change to show an open tunnel: </p><p><img src="using-tunnelblick-files/using-tunnelblick-open.png" /> </p><p>You may be asked for a passphrase or username/password combination if key/certificate files are not being used. You can save your passphrase or password in Apple&#x27;s Keychain by checking the appropriate checkbox. </p><p>The connection will be active as long as you do not end it or log out. Putting your computer to sleep or losing contact with the server (by lack of wlan signal, for example) will make Tunnelblick periodically try to re-establish the connection. </p><p>If a connection error occurs, or in the unlikely event of an interface crash, Tunnelblick will terminate the VPN tunnel and record the error in the Console Log. </p><p>Use &quot;Disconnect” from the drop-down menu to close the VPN connection. Use &quot;Quit” to close all open connections and quit the program and prevent Tunnelblick from starting itself at your next login at your computer. </p><p>If Tunnelblick is running when you logout (or your computer crashes, or is shut down or restarted), then Tunnelblick will be started automatically upon login. To stop Tunnelblick from being started automatically upon login, be sure to quit Tunnelblick before logging out, either by using the &quot;Quit” command, or by using Command-Q (Apple-Q) when the &quot;OpenVPN Log” or &quot;About…” window is active. (Don&#x27;t confuse this automatic launch of Tunnelblick upon login with the &quot;Automatically connect on launch” option, which causes a connection to be established when Tunnelblick is started.) </p><h2><a name="THE_&quot;OPTIONS&quot;_SUBMENU"/>THE &quot;OPTIONS&quot; SUBMENU</h2><p>When the Tunnelblick menu is displayed, if you hover over &quot;Options&quot;, the Options Submenu appears: </p><p><img src="using-tunnelblick-files/using-tunnelblick-options-menu.png" /> </p><p>Click on an item in the Options Submenu to change a preference, check for updates, or display the &quot;About&quot; window. For more details on preferences, see <span style="border-bottom: 1px dotted black">Preferences</span>, below. </p><p>Some deployed versions of Tunnelblick do not display the Options Submenu (it is controlled by a preference), in which case the &quot;Options&quot; menu item is replaced by &quot;About Tunnelblick...&quot; </p><h2><a name="THE_&quot;OPENVPN_LOG”_WINDOW"/>THE &quot;OPENVPN LOG” WINDOW</h2><p>Click on the Tunnelblick icon in the Status Bar at the top of your screen between the time and the Spotlight icon then click on &quot;Details…” to obtain details for all connections (open or closed). A window similar to the following will appear: </p><p><img src="using-tunnelblick-files/using-tunnelblick-details-a.png" /> </p><p>There will be a tab for each connection (i.e., each .ovpn or .conf file), whether the connection is open or closed. Each tab contains a pane with the OpenVPN Log for the connection and two checkboxes that provide options for that connection: </p><ul><li>&quot;Automatically connect on launch” causes the connection to be opened when Tunnelblick is launched (started). &quot;Automatically connect on launch” is unchecked by default. </li></ul><ul><li>&quot;Set nameserver” causes scripts to be run before a connection is opened and after the connection is closed. The scripts, client.up.osx.sh and client.down.osx.sh or  client.nomonitor.up.osx.sh and client.nomonitor.down.osx.sh, save and restore DNS nameserver information. The scripts are located in the Tunnelblick application package at Tunnelblick.app/Contents/Resources. &quot;Set nameserver” is checked by default. </li></ul><p>     <blockquote>When a connection is attempted, the script for &quot;Set nameserver” saves the current DNS settings and removes DNS settings that were set by DHCP (manual DNS settings are <i>not</i> removed). When a connection is disconnected (or if it fails to connect), the scripts restore the saved DNS settings. The scripts do not support the simultaneous use of two or more nameservers for different domains; custom up/down scripts must be used for this purpose. 
</blockquote></p><ul><li>&quot;Monitor connection&quot; causes the network connection to be monitored for changes. It is available only when &quot;Set nameserver&quot; is checked. When a change is detected, the tunnel will be disconnected and reconnected. &quot;Monitor connection&quot; is checked by default, but the connection is only monitored when &quot;Set nameserver&quot; is checked. </li></ul><p>     In addition, the &quot;OpenVPN Log” window contains four buttons: </p><ul><li>&quot;Clear log” clears the OpenVPN Log for the connection being displayed. </li></ul><ul><li>&quot;Edit configuration” starts <span style="border-bottom: 1px dotted black">TextEdit</span> with the configuration file containing the OpenVPN configuration for the connection being displayed so it can be edited. Since configuration files are owned by root, they may only be edited by computer administrators. Some deployed versions of Tunnelblick may disable this button -- it will appear dim, and cannot be selected. </li></ul><ul><li>&quot;Connect” opens the connection being displayed. </li></ul><ul><li>&quot;Disconnect” closes the connection being displayed. </li></ul><p>You may use the standard keyboard shortcuts in the &quot;OpenVPN Log&quot; window: Command-C, Command-X, and Command-V for copy, cut, and paste; and Command-A, Command-M, Command-W, and Command-Q to select all the text in the log that is currently being displayed, minimize the window to the dock, close the window, and quit the program. </p><h2><a name="THE_&quot;ABOUT_TUNNELBLICK”_WINDOW"/>THE &quot;ABOUT TUNNELBLICK” WINDOW</h2><p>Click on the Tunnelblick icon in the Status Bar at the top of your screen between the time and the Spotlight icon, then (if it is visible) click on &quot;Options&quot;, then on &quot;About Tunnelblick…” to open a window with information about the versions of Tunnelblick and OpenVPN that are running and a link to the Tunnelblick website. </p><h2><a name="THE_&quot;SET_NAMESERVER&quot;_CHECKBOX_AND_DNS_&amp;_WINS_SETTI"/>THE &quot;SET NAMESERVER&quot; CHECKBOX AND DNS &amp; WINS SETTINGS</h2><p>If you are using DHCP, wish to use DNS and WINS servers at the far end of the tunnel when connected, and the VPN server you are connecting to &quot;pushes&quot; DNS and WINS settings to your client, put a check in the &quot;Set nameserver&quot; checkbox. (This is the situation for most users.) </p><p>If you are using DHCP, wish to use your original DNS and WINS servers when connected, and the VPN server you are connecting to does not &quot;push&quot; DNS or WINS settings to your client, un-check the &quot;Set nameserver&quot; checkbox. </p><p>If you are using manual settings, different versions of OS X behave differently. This is due to a change in network behavior in Snow Leopard and is beyond the scope of this project to fix. </p><p>If you&#x27;re using Leopard (10.5) or Tiger (10.4), then it is possible to use the VPN-server-supplied DNS and WINS settings <strong>in addition to</strong> your manual settings by checking the &quot;Set nameserver&quot; box. However, your manual settings will always take precedence over any VPN server-supplied settings.  If &quot;Set nameserver&quot; is un-checked, you will continue to use only your manually-configured settings and any VPN server-supplied settings will be ignored. </p><p>If you are using Snow Leopard (10.6), then your manually-configured DNS and WINS settings will <strong>always</strong> be used, and no aggregation of configurations will be performed. </p><ul><li>If you set your DNS servers manually, then regardless of the state of the &quot;Set nameserver&quot; box, your manual DNS servers will always be the only ones used. </li></ul><ul><li>If you set your Search Domain(s) manually, then regardless of the state of the &quot;Set nameserver&quot; box, your manual Search Domains will always be the only ones used. </li></ul><ul><li>If you set your WINS servers manually, then regardless of the state of the &quot;Set nameserver&quot; box, your manual WINS servers will always be the only ones used. </li></ul><ul><li>Each of these settings is independent of the others: if &quot;Set nameserver&quot; is checked, those settings not configured manually will be replaced by the settings obtained from the VPN server.  If &quot;Set nameserver&quot; is not checked, then as with Leopard/Tiger, no DNS/WINS settings will be applied. </li></ul><p><strong>If your situation is not described above</strong> (e.g., if you use manual DNS settings and wish to use DNS servers at the far end of a tunnel when connected, or you wish to use the OS X ability to use different nameservers for different domains), you must create your own up/down scripts and un-check the &quot;Set nameserver&quot; checkbox. </p><h2><a name="THE_&quot;MONITOR_CONNECTION&quot;_CHECKBOX"/>THE &quot;MONITOR CONNECTION&quot; CHECKBOX</h2><p>If checked (the default), the &quot;Monitor connection&quot; checkbox instructs Tunnelblick to monitor the connection&#x27;s interface for changes. If Tunnelblick detects a change to DNS or WINS, the connection will be restarted. Under certain circumstances, repeated and unnecessary restarts are peformed; unchecking this box stops this from occurring. </p><p>Note that connection monitoring is not available unless &quot;Set nameserver&quot; is checked. </p><h2><a name="USING_MORE_THAN_ONE_VPN_CONNECTION"/>USING MORE THAN ONE VPN CONNECTION</h2><p>You can put more than one .ovpn or .conf file together with its key and/or certificate files into the ~/Library/Application Support/Tunnelblick/Configurations folder. Tunnelblick interprets each .ovpn or .conf file in the ~/Library/Application Support/Tunnelblick/Configurations folder as a configuration file for a different connection; each of the connections will be available in the drop down menu and shown as a separate tab in the &quot;OpenVPN Log” window. </p><h2><a name="USING_MORE_THAN_ONE_VPN_CONNECTION_SIMULTANEOUSLY"/>USING MORE THAN ONE VPN CONNECTION SIMULTANEOUSLY</h2><p>Tunnelblick can maintain multiple simultaneous open connections to different VPNs. </p><p>However, this is for experts only: </p><ul><li>If you use &quot;Set nameserver” (which uses standard scripts to save/change/restore DNS resolution data), on one or more connections your DNS settings may not be saved and restored properly and DNS might or might not work. It depends on the order in what DNS settings you want to use and which connections are opened and closed. Connections may close and be reopened because of communications errors over which you have no control, which can cause unpredictable results. Not recommended. </li><li>If you don&#x27;t use &quot;Set nameserver”, and your customized configuration files are suitably written to work together with custom scripts, things can work. But if you don&#x27;t handle the DNS and routing settings properly, lots of things could go wrong. So this isn&#x27;t recommended either unless you really know what you&#x27;re doing and have a NEED to connect to multiple VPNs simultaneously. </li><li>VPN administrators might not be happy that you are connecting their networks together. Most VPN client software limits you to a single connection, probably for that reason. </li></ul><h2><a name="AUTOMATICALLY_STARTING_TUNNELBLICK_UPON_LOGIN"/>AUTOMATICALLY STARTING TUNNELBLICK UPON LOGIN</h2><p>Tunnelblick was designed as a persistent menu icon that survives reboots. To this end, it inserts itself into the login items when it is started and only removes itself from the login items when you choose Quit from the menu or Command-Q from the &quot;OpenVPN Log” window. So if you just log out, shut down, or restart your computer, or it crashes, the next time you log in, Tunnelblick will automatically start. If you do not want Tunnelblick to start automatically, quit Tunnelblick before you log out, shut down, or restart. </p><h2><a name="AUTOMATICALLY_OPENING_A_VPN_CONNECTION_WHEN_TUNNELBLICK_STARTS"/>AUTOMATICALLY OPENING A VPN CONNECTION WHEN TUNNELBLICK STARTS</h2><p>You can specify that a connection automatically be opened when Tunnelblick starts by putting a check in the &quot;Automatically connect on launch” checkbox for that connection. The checkbox is located on the connection&#x27;s tab in the &quot;OpenVPN Log” window. </p><h2><a name="USING_openvpn-down-root.so"/>USING openvpn-down-root.so</h2><p>When using &quot;Set nameserver&quot;, it is usually necessary to avoid using the OpenVPN &quot;user&quot; and &quot;group&quot; options. These options cause OpenVPN to drop root privileges and take the privileges of the specified user and group. It this is done, then the standard scripts that handle restarting connections when there is a transient failure fail, because they are run without root privileges. And restoring routes when a tunnel is disconnected fails, too. So the &quot;user&quot; and &quot;group&quot; OpenVPN options should not be specified. </p><p>However, starting with Tunnelblick version 3.0b22, Tunnelblick includes the &quot;openvpn-down-root.so&quot; plugin for OpenVPN. It is located in theTunnelblick.app/Contents/Resources&quot; folder. This plugin, when activated by including a line in the configuration file, allows the use of the &quot;user&quot; and &quot;group&quot; options, so that OpenVPN drops root privileges, but still have the scripts run as root, so reconnecting after transient network problems, or restoring routes when a tunnel is disconnected continue to work. To activate the plugin, include the following line in your configuration file: </p><blockquote>plugin path-to-openvpn-down-root.so path-to-client.down.osx.sh 
</blockquote><p>Example: If Tunnelblick.app is located in /Applications, the line would be: </p><blockquote>plugin /Applications/Tunnelblick.app/Contents/Resources/openvpn-down-root.so /Applications/Tunnelblick.app/Contents/Resources/client.down.osx.sh  
</blockquote><p>Example: If using a &quot;deployed&quot; version of Tunnelblick: </p><blockquote>plugin ../openvpn-down-root.so ../client.down.osx.sh  
</blockquote><h2><a name="PREFERENCES"/>PREFERENCES</h2><p>Note: A &quot;deployed&quot; version of Tunnelblick can contain a &quot;forced-preferences.plist&quot; file, which lists preference values which override the preferences located in ~/Library/Preferences/com.openvpn.tunnelblick.plist. See <span style="border-bottom: 1px dotted black">the Deploying Tunnelblick wiki</span> for more details. </p><p>The following commonly used preferences may be examined or changed from Tunneblick&#x27;s &quot;Options&quot; submenu: <ul><li><strong>Place Icon Near the Spotlight Icon</strong>: If checked (the default) and the system support it, an undocumented system method is used to force the Tunnelblick icon to be placed as indicated. If unchecked, the Tunnelblick icon will be placed to the left of the leftmost item in the Status Bar. </li><li><strong>Monitor the Configuration Folder</strong>: If checked (the default), the configuration folder will be monitored for new or removed configuration files. New configuration files will be available in Tunnelblick immediately without disturbing connections, and removed configuration files will have their connections (if any) closed and be removed from the list of available connections. If unchecked, the folder will not be monitored and the user will have to quit and relaunch Tunnelblick for new configuration files to be recognized. This is sometimes useful if the home folder is on a remote volume.  Note that the current contents of a configuration file will be used whenever a connection is attempted, regardless of this preference. </li><li><strong>Warn About Simultaneous Connections</strong>: If checked (the default), a warning will be displayed whenever more than one simultaneous connection would be made. If unchecked, no such warning is displayed. </li><li><strong>Show Connection Timers</strong>: If checked, displays a timer for each connection in the label for each tab in the &quot;OpenVPN Log&quot; window. If unchecked (the default), timers are not displayed. </li><li><strong>Use Shadow Copies of Configuration Files</strong>: If checked, secure &quot;shadow&quot; copies of configuration files are created in the /Library/Tunnelblick/username folder and used for connections. If unchecked (the default), the original configuration files are used. This is done automatically (regardless of this preference) if the configuration files are on a network volume. Background: Configuration files must be secure (owned by root with 644 permissions) because they can invoke scripts running as root. Some filesystems (remote filesystems, FAT32, etc.) do not allow files to be secured this way, so Tunnelblick copies configuration file to the local hard drive and secures the copies. This is done transparently without user intervention. This preference allows home folders on local volumes to be configured so as to prohibit ownership of any file by root. </li><li><strong>Automatically check for updates</strong>: If checked, the official Tunnelblick website will be checked for updates each time Tunnelblick is launched. If unchecked, no such checking will take place. &quot;Check for Updates Now&quot; (on the &quot;Options&quot; submenu) may be used at any time to check for updates. There is no default for this preference because the user is asked when Tunnelblick is launched the second time whether or not automatic checks should be made. </li><li><strong>Send Anonymous System Profile</strong>: If checked (the default), information about the system (such as the version of OS X, CPU type, etc.) will be sent to the Tunnelblick website whenever the program checks for updates. This information helps us know how to improve Tunnelblick. This preference is set the second time Tunnelblick is launched. It is a checkbox item in the window in which the user selects whether or not to automatically check for updates. </li></ul></p><p>The preference keys for the above preferences are: <strong>placeIconInStandardPositionInStatusBar</strong>, <strong>doNotMonitorConfigurationFolder</strong>, <strong>skipWarningAboutSimultaneousConnections</strong>, <strong>showConnectedDurations</strong>, <strong>useShadowConfigurationFiles</strong>, <strong>SUEnableAutomaticChecks</strong>, and <strong>SUSendProfileInfo</strong>. </p><p>(Note that some preferences are stored as the opposite of their corresponding checkbox state.) </p><p>For each configuration file, the following preferences may be examined or changed using checkboxes on the OpenVPN Log window for the corresponding configuration: <ul><li><strong>Automatically connect on launch</strong>: If checked, attempts to open this connection each time Tunnelblick is launched. The default is unchecked. </li><li><strong>Set nameserver</strong>: If checked (the default), scripts will be run so that interface information will be saved when a connection is made and restored when it is disconnected (see the &quot;The &quot;Set nameserver&quot; Checkbox and DNS &amp; WINS Settings&quot; section). </li><li><strong>Monitor connection</strong>: If checked (the default), the scripts will monitor the connection interface. The connection will be restarted if changes to DNS or WINS settings are detected. </li></ul>   The preference keys for the above preferences are: <strong>CONFIGNAMEautoConnect</strong>, <strong>CONFIGNAMEuseDNS</strong>, and <strong>CONFIGNAME-notMonitoringConnection</strong>. (&quot;CONFIGNAME” is the name of the configuration file, without the &quot;.conf&quot; or &quot;.ovpn&quot; extension.) </p><p>Several additional preferences cannot be viewed or modified via the user interface. They are usually used in customized or deployed versions of Tunnelblick. </p><p>The following preferences control what is displayed to the user. All default to FALSE: <ul><li><strong>doNotShowOptionsSubmenu</strong>: </li><li><strong>doNotShowCheckForUpdatesNowMenuItem</strong>: </li><li><strong>doNotShowForcedPreferenceMenuItems</strong>: </li></ul></p><p>The following preferences are automatically maintained by the program: <ul><li><strong>SUHasLaunchedBefore</strong>: Used to ask the user about automatic updates only on Tunnelblick&#x27;s second launch. </li><li><strong>SULastCheckTime</strong>: The date and time Tunnelblick last checked for updates. </li><li><strong>detailsWindowFrame</strong>: The size and position of the &quot;OpenVPN Log” window when it was last closed. </li><li><strong>detailsWindowFrameVersion</strong>: The version of Tunnelblick that saved the detailsWindowFrame preference. </li></ul></p><p>The following per-configuration preferences do not have a user interface: </p><p><strong>CONFIGNAME<i>-useDownRootPlugin</strong>: Causes the plugin to be loaded when the configuration is used to start a connection. The default is cleared. </i></p><p><strong>CONFIGNAMEdisableEditConfiguration</strong>: Disables the &quot;Edit configuration&quot; button for the configuration. The default is cleared. </p><p><strong>CONFIGNAME-keychainHasPrivateKey</strong> and <strong>CONFIGNAME-keychainHasUsernameAndPassword</strong>: These preferences are used internally by Tunnelblick to indicate the presence of passphrases (private keys) or username/password combinations that are stored in the keychain. They  should not, be modified by the user, and they have special meaning in &quot;forced-preferences.plist&quot;. Each are cleared by default. </p><h2><a name="COMMAND-LINE_INTERFACE"/>COMMAND-LINE INTERFACE</h2><p>Tunnelblick also contains openvpnstart, an OS X command line interface to OpenVPN which provides a scriptable way to create and destroy OpenVPN tunnels. openvpnstart is located in Tunnelblick.app/Contents/Resources. For details on using openvpnstart, run it from a Terminal window with no arguments. </p><h2><a name="DOCUMENT_HISTORY"/>DOCUMENT HISTORY</h2><ul><li>2009-12-12 (Version 3.0b24) </li><ul><li>Modified to reflect move from ~/Library/openvpn to ~/Library/Application Support/Tunnelblick/Configurations. </li><li>Added note about localization of &quot;Library&quot; in Finder. </li><li>Added &quot;DEPLOYMENT&quot;, &quot;THE &#x27;MONITOR CONNECTION&#x27; CHECKBOX&quot;, &quot;USING openvpn-down-root.so&quot;, and &quot;DOCUMENT HISTORY&quot; sections. </li><li>Changed &quot;PREFERENCES&quot; section to reflect new user interface to preferences and new preferences. </li><li>Changes to &quot;THE &#x27;ABOUT TUNNELBLICK&#x27; WINDOW&quot; section to the reflect new &quot;Options&quot; submenu. </li><li>Added new image of OpenVPN Log window showing &quot;Monitor connection&quot; checkbox. </li></ul></ul>
 </body>
</html>
